# 规则和提示文档

## 1. 开发规则

### 1.1 代码规范
1. 遵循PEP 8代码规范
2. 函数和变量命名使用小写字母和下划线
3. 类名使用大写字母开头的驼峰命名法
4. 每个函数应有清晰的文档字符串
5. 代码注释应清晰明了，解释复杂逻辑

### 1.2 文件管理
1. 每个代码文件不超过300行
2. 优先复用和优化原接口和已有代码
3. 发现有重复的功能代码，进行合并
4. 保持代码的可读性和可维护性
5. 确保代码修改不会引入新的bug
6. 保持代码的简洁性和一致性
7. 修改文件和删除文件时，确认其他文件是否引用了该文件，避免删除错误
8. 确保代码修改不会影响其他模块和功能

### 1.3 功能开发
1. 先计划，再执行，要验证，再总结结论
2. 记录Prompt至docs/rules/prompts.md文件中
3. 查看对应PRD.md和structure.md文件
4. 根据任务描述，调整对应PRD.md文件，提前设计测试思路

## 2. 提示词记录

### 2.1 开发提示词

#### 视频处理功能开发提示词
```
为视频自动剪辑工具添加音频抽取功能：
1. 在后端添加音频抽取函数，使用FFmpeg进行零重编码音频抽取
2. 添加音频抽取路由接口
3. 在前端添加音频抽取标签页
4. 创建JavaScript模块处理音频抽取功能
5. 更新主JavaScript文件导入和初始化音频模块
```

#### 文档编写提示词
```
创建项目文档：
1. 新建docs文件夹
2. 书写PRD文档，包含项目概述、功能需求、用户界面设计、技术实现、性能要求、安全要求、测试计划、项目里程碑和风险评估
3. 书写系统架构文档，包含系统概述、技术架构、目录结构、核心模块设计、数据流设计、接口设计、部署架构、性能优化和安全设计
4. 书写测试计划文档，包含测试概述、测试策略、功能测试用例、性能测试、兼容性测试、用户体验测试、自动化测试、测试执行计划、测试风险与应对措施和测试报告模板
```

### 2.2 问题解决提示词

#### 代码错误修复提示词
```
修复Python语法错误：
1. 检查括号是否匹配
2. 检查引号是否闭合
3. 检查缩进是否正确
4. 检查函数调用是否正确
```

#### 文件操作提示词
```
创建和修改文件：
1. 优先编辑现有文件而不是创建新文件
2. 确保文件路径正确
3. 检查文件权限
4. 备份重要文件
```

## 3. 最佳实践

### 3.1 Git操作最佳实践
1. 频繁提交小的更改
2. 编写清晰的提交信息
3. 在功能分支上进行开发
4. 定期同步主分支

### 3.2 测试最佳实践
1. 先写测试再写代码（测试驱动开发）
2. 保持测试的独立性
3. 测试边界条件
4. 自动化重复性测试

### 3.3 文档最佳实践
1. 及时更新文档
2. 保持文档简洁明了
3. 使用图表辅助说明
4. 提供实际示例

## 4. 常见问题与解决方案

### 4.1 环境配置问题
**问题**：FFmpeg未正确安装或路径配置错误
**解决方案**：
1. 确认FFmpeg已安装
2. 检查FFmpeg是否在系统PATH中
3. 在代码中正确配置FFmpeg路径

### 4.2 文件上传问题
**问题**：文件上传失败或上传进度不显示
**解决方案**：
1. 检查文件大小限制
2. 验证文件类型
3. 确认服务器存储空间充足
4. 检查网络连接

### 4.3 视频处理问题
**问题**：视频处理失败或处理时间过长
**解决方案**：
1. 使用零重编码技术提高处理效率
2. 提供备选处理方案
3. 添加超时处理机制
4. 优化FFmpeg参数

## 5. 代码审查清单

### 5.1 功能实现审查
- [ ] 功能是否按需求实现
- [ ] 代码逻辑是否正确
- [ ] 是否有异常处理
- [ ] 是否有性能优化

### 5.2 代码质量审查
- [ ] 代码是否符合规范
- [ ] 是否有重复代码
- [ ] 变量命名是否清晰
- [ ] 注释是否充分

### 5.3 安全性审查
- [ ] 是否有输入验证
- [ ] 是否有路径遍历防护
- [ ] 是否有文件类型检查
- [ ] 是否有错误信息泄露

### 5.4 测试审查
- [ ] 是否有单元测试
- [ ] 测试用例是否覆盖全面
- [ ] 是否有性能测试
- [ ] 是否有兼容性测试