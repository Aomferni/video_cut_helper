<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è§†é¢‘è‡ªåŠ¨å‰ªè¾‘å·¥å…· - é¡¹ç›®ä»‹ç»</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <style>
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .section {
            margin-bottom: 40px;
            padding: 20px;
            border-radius: 8px;
            background-color: #f9f9f9;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .section-title {
            font-size: 24px;
            font-weight: bold;
            color: #333;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #4CAF50;
        }
        
        .subsection-title {
            font-size: 20px;
            font-weight: bold;
            color: #555;
            margin: 20px 0 15px 0;
        }
        
        .code-block {
            background-color: #f5f5f5;
            border-left: 4px solid #4CAF50;
            padding: 15px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            overflow-x: auto;
        }
        
        .api-table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }
        
        .api-table th, .api-table td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }
        
        .api-table th {
            background-color: #4CAF50;
            color: white;
        }
        
        .api-table tr:nth-child(even) {
            background-color: #f2f2f2;
        }
        
        ul, ol {
            margin: 10px 0;
            padding-left: 20px;
        }
        
        li {
            margin: 8px 0;
        }
        
        .back-link {
            display: inline-block;
            margin-bottom: 20px;
            color: #4CAF50;
            text-decoration: none;
            font-weight: bold;
        }
        
        .back-link:hover {
            text-decoration: underline;
        }
        
        .mermaid {
            text-align: center;
            margin: 20px 0;
        }
        
        .user-section {
            background-color: #e8f5e9;
        }
        
        .developer-section {
            background-color: #e3f2fd;
        }
        
        .feature-card {
            background: white;
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        
        .feature-card h4 {
            margin-top: 0;
            color: #2e7d32;
        }
        
        .tech-stack {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 15px 0;
        }
        
        .tech-item {
            background: #4CAF50;
            color: white;
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 14px;
        }
        
        .diagram-container {
            background: white;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            overflow-x: auto;
        }
        
        .architecture-diagram {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
            margin: 20px 0;
        }
        
        .arch-component {
            flex: 1;
            min-width: 150px;
            text-align: center;
            padding: 15px;
            background: #f5f5f5;
            border-radius: 8px;
            border: 1px solid #ddd;
        }
        
        .arch-component h4 {
            margin: 0 0 10px 0;
            color: #333;
        }
        
        .arrow {
            font-size: 24px;
            color: #4CAF50;
        }
    </style>
    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
        mermaid.initialize({ startOnLoad: true });
    </script>
</head>
<body>
    <div class="container">
        <a href="{{ url_for('index') }}" class="back-link">â† è¿”å›ä¸»é¡µé¢</a>
        
        <h1>è§†é¢‘è‡ªåŠ¨å‰ªè¾‘å·¥å…· - é¡¹ç›®ä»‹ç»</h1>
        
        <!-- é¢å‘æ³›äººç¾¤çš„éƒ¨åˆ† -->
        <div class="section user-section">
            <h2 class="section-title">ğŸ¯ è¿™æ˜¯ä»€ä¹ˆå·¥å…·ï¼Ÿ</h2>
            <p>è§†é¢‘è‡ªåŠ¨å‰ªè¾‘å·¥å…·æ˜¯ä¸€ä¸ªåŸºäºWebçš„å¤šåª’ä½“å¤„ç†åº”ç”¨ï¼Œæ—¨åœ¨ç®€åŒ–è§†é¢‘ç¼–è¾‘æµç¨‹ï¼Œæé«˜å†…å®¹åˆ›ä½œè€…çš„å·¥ä½œæ•ˆç‡ã€‚æ— è®ºä½ æ˜¯æ•™è‚²å·¥ä½œè€…ã€è‡ªåª’ä½“åˆ›ä½œè€…è¿˜æ˜¯æ™®é€šç”¨æˆ·ï¼Œéƒ½å¯ä»¥é€šè¿‡è¿™ä¸ªå·¥å…·å¿«é€Ÿå®Œæˆè§†é¢‘å‰ªè¾‘ä»»åŠ¡ã€‚</p>
            
            <h3 class="subsection-title">ğŸŒŸ æ ¸å¿ƒåŠŸèƒ½</h3>
            <div class="feature-card">
                <h4>âœ‚ï¸ è§†é¢‘å‰ªè¾‘</h4>
                <p>ä¸Šä¼ åŸå§‹è§†é¢‘å’Œå‰ªè¾‘éœ€æ±‚ï¼Œè‡ªåŠ¨è£å‰ªå‡ºä½ éœ€è¦çš„è§†é¢‘ç‰‡æ®µ</p>
            </div>
            
            <div class="feature-card">
                <h4>ğŸ”— è§†é¢‘æ‹¼æ¥</h4>
                <p>å°†å¤šä¸ªè§†é¢‘ç‰‡æ®µæŒ‰é¡ºåºæ‹¼æ¥æˆä¸€ä¸ªå®Œæ•´çš„è§†é¢‘</p>
            </div>
            
            <div class="feature-card">
                <h4>ğŸ“Š ä¿¡æ¯åˆ†æ</h4>
                <p>è‡ªåŠ¨æå–è§†é¢‘åŸºæœ¬ä¿¡æ¯ï¼Œå¸®åŠ©ä½ æ›´å¥½åœ°äº†è§£è§†é¢‘å†…å®¹</p>
            </div>
            
            <h3 class="subsection-title">ğŸš€ ä½¿ç”¨æµç¨‹</h3>
            <div class="diagram-container">
                <div class="mermaid">
graph TD
    A[ä¸Šä¼ è§†é¢‘] --> B[è®¾ç½®å‰ªè¾‘ç‚¹]
    B --> C[æ‰§è¡Œå‰ªè¾‘]
    C --> D[ä¸‹è½½ç»“æœ]
    D --> E[å®Œæˆ]
                </div>
            </div>
            
            <h3 class="subsection-title">ğŸ‘¥ é€‚ç”¨äººç¾¤</h3>
            <ul>
                <li><strong>æ•™è‚²å·¥ä½œè€…</strong>: å¿«é€Ÿå‰ªè¾‘è¯¾ç¨‹è§†é¢‘ï¼Œæå–é‡ç‚¹å†…å®¹</li>
                <li><strong>è‡ªåª’ä½“åˆ›ä½œè€…</strong>: é«˜æ•ˆå¤„ç†å¤§é‡è§†é¢‘ç´ æ</li>
                <li><strong>æ™®é€šç”¨æˆ·</strong>: ç®€å•æ˜“ç”¨çš„è§†é¢‘ç¼–è¾‘å·¥å…·</li>
            </ul>
        </div>
        
        <!-- é¢å‘å¼€å‘è€…çš„éƒ¨åˆ† -->
        <div class="section developer-section">
            <h2 class="section-title">ğŸ’» æŠ€æœ¯æ¶æ„ä¸å¼€å‘æŒ‡å—</h2>
            
            <h3 class="subsection-title">ğŸ—ï¸ ç³»ç»Ÿæ¶æ„</h3>
            <div class="architecture-diagram">
                <div class="arch-component">
                    <h4>å‰ç«¯ç•Œé¢</h4>
                    <p>HTML/CSS/JavaScript</p>
                </div>
                <div class="arrow">â†’</div>
                <div class="arch-component">
                    <h4>WebæœåŠ¡</h4>
                    <p>Flask</p>
                </div>
                <div class="arrow">â†’</div>
                <div class="arch-component">
                    <h4>å¤„ç†å¼•æ“</h4>
                    <p>FFmpeg/MoviePy</p>
                </div>
            </div>
            
            <h3 class="subsection-title">ğŸ”§ æŠ€æœ¯æ ˆ</h3>
            <div class="tech-stack">
                <div class="tech-item">Python Flask</div>
                <div class="tech-item">FFmpeg</div>
                <div class="tech-item">MoviePy</div>
                <div class="tech-item">HTML5/CSS3</div>
                <div class="tech-item">JavaScript</div>
                <div class="tech-item">Pandas</div>
            </div>
            
            <h3 class="subsection-title">ğŸ“‹ æ ¸å¿ƒå¤„ç†æµç¨‹</h3>
            <div class="diagram-container">
                <div class="mermaid">
graph TD
    A[ç”¨æˆ·è¯·æ±‚] --> B{åŠŸèƒ½ç±»å‹}
    B -->|è§†é¢‘å‰ªè¾‘| C[smart_cutå‡½æ•°]
    B -->|è§†é¢‘æ‹¼æ¥| D[concatenate_videoså‡½æ•°]
    C --> E[é›¶é‡ç¼–ç å¤„ç†]
    E -->|æˆåŠŸ| F[è¿”å›ç»“æœ]
    E -->|å¤±è´¥| G[MoviePyå›é€€]
    G --> F
    D --> H[FFmpegæ‹¼æ¥]
    H -->|æˆåŠŸ| F
    H -->|å¤±è´¥| I[MoviePyå›é€€]
    I --> F
                </div>
            </div>
            
            <h3 class="subsection-title">ğŸ“š æ ¸å¿ƒå‡½æ•°</h3>
            
            <h4>1. è§†é¢‘å‰ªè¾‘ç›¸å…³å‡½æ•°</h4>
            <div class="code-block">
// é›¶é‡ç¼–ç ç²¾å‡†åˆ‡ç‰‡
def smart_cut(in_file, out_file, start, end):
    """ä½¿ç”¨FFmpegè¿›è¡Œé›¶é‡ç¼–ç åˆ‡ç‰‡"""
    cmd = [
        FFMPEG_PATH,
        '-i', in_file,
        '-ss', str(start),
        '-to', str(end),
        '-c', 'copy',  # é›¶é‡ç¼–ç 
        '-y',
        out_file
    ]
                
// æ ¹æ®DataFrameè£å‰ªè§†é¢‘
def cut_videos_from_dataframe(input_video_path, df):
    """æ ¹æ®Excelæ•°æ®è£å‰ªè§†é¢‘ç‰‡æ®µ"""
    # éå†æ•°æ®å¸§ä¸­çš„æ¯ä¸€è¡Œè¿›è¡Œè£å‰ª
</div>
            
            <h4>2. è§†é¢‘æ‹¼æ¥ç›¸å…³å‡½æ•°</h4>
            <div class="code-block">
// é›¶é‡ç¼–ç æ‹¼æ¥
def concatenate_videos(video_paths, output_path):
    """ä½¿ç”¨FFmpegè¿›è¡Œé›¶é‡ç¼–ç æ‹¼æ¥"""
    # ç”Ÿæˆconcatæ¸…å•æ–‡ä»¶
    # è°ƒç”¨FFmpegå‘½ä»¤æ‹¼æ¥è§†é¢‘
                
// å›é€€æ‹¼æ¥æ–¹æ¡ˆ
def fallback_concatenate_videos(video_paths, output_path):
    """ä½¿ç”¨MoviePyè¿›è¡Œæ‹¼æ¥ï¼ˆå›é€€æ–¹æ¡ˆï¼‰"""
    # ä½¿ç”¨MoviePyçš„concatenate_videoclipså‡½æ•°
</div>
            
            <h4>3. å·¥å…·å‡½æ•°</h4>
            <div class="code-block">
// æ—¶é—´è½¬æ¢å‡½æ•°
def time_to_seconds(t):
    """å°†æ—¶é—´å­—ç¬¦ä¸²è½¬æ¢ä¸ºç§’æ•°"""
                
def seconds_to_time(seconds):
    """å°†ç§’æ•°è½¬æ¢ä¸ºæ—¶é—´å­—ç¬¦ä¸²"""
                
// è§†é¢‘ä¿¡æ¯æå–
def get_video_info(video_path):
    """è·å–è§†é¢‘åŸºæœ¬ä¿¡æ¯"""
</div>
            
            <h3 class="subsection-title">ğŸ“¡ APIæ¥å£</h3>
            
            <table class="api-table">
                <thead>
                    <tr>
                        <th>æ¥å£è·¯å¾„</th>
                        <th>æ–¹æ³•</th>
                        <th>åŠŸèƒ½æè¿°</th>
                        <th>è¯·æ±‚å‚æ•°</th>
                        <th>è¿”å›å€¼</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>/upload_video</code></td>
                        <td>POST</td>
                        <td>ä¸Šä¼ è§†é¢‘æ–‡ä»¶</td>
                        <td>è§†é¢‘æ–‡ä»¶</td>
                        <td>ä¸Šä¼ ç»“æœå’Œæ–‡ä»¶è·¯å¾„</td>
                    </tr>
                    <tr>
                        <td><code>/upload_excel</code></td>
                        <td>POST</td>
                        <td>ä¸Šä¼ Excelæ–‡ä»¶</td>
                        <td>Excelæ–‡ä»¶</td>
                        <td>æ–‡ä»¶å†…å®¹å’Œè·¯å¾„</td>
                    </tr>
                    <tr>
                        <td><code>/get_video_info</code></td>
                        <td>POST</td>
                        <td>è·å–è§†é¢‘ä¿¡æ¯</td>
                        <td>è§†é¢‘æ–‡ä»¶è·¯å¾„</td>
                        <td>è§†é¢‘åŸºæœ¬ä¿¡æ¯</td>
                    </tr>
                    <tr>
                        <td><code>/cut_videos</code></td>
                        <td>POST</td>
                        <td>æ‰§è¡Œè§†é¢‘å‰ªè¾‘</td>
                        <td>è§†é¢‘è·¯å¾„å’Œå‰ªè¾‘æ•°æ®</td>
                        <td>å‰ªè¾‘ç»“æœ</td>
                    </tr>
                    <tr>
                        <td><code>/concat_videos</code></td>
                        <td>POST</td>
                        <td>æ‰§è¡Œè§†é¢‘æ‹¼æ¥</td>
                        <td>è§†é¢‘è·¯å¾„åˆ—è¡¨</td>
                        <td>æ‹¼æ¥ç»“æœ</td>
                    </tr>
                    <tr>
                        <td><code>/export_excel</code></td>
                        <td>POST</td>
                        <td>å¯¼å‡ºå‰ªè¾‘éœ€æ±‚Excel</td>
                        <td>è¡¨æ ¼æ•°æ®</td>
                        <td>Excelæ–‡ä»¶ä¿¡æ¯</td>
                    </tr>
                    <tr>
                        <td><code>/list_output_files</code></td>
                        <td>GET</td>
                        <td>åˆ—å‡ºè¾“å‡ºæ–‡ä»¶</td>
                        <td>æ— </td>
                        <td>æ–‡ä»¶åˆ—è¡¨</td>
                    </tr>
                    <tr>
                        <td><code>/download/&lt;filename&gt;</code></td>
                        <td>GET</td>
                        <td>ä¸‹è½½æ–‡ä»¶</td>
                        <td>æ–‡ä»¶å</td>
                        <td>æ–‡ä»¶å†…å®¹</td>
                    </tr>
                </tbody>
            </table>
            
            <h3 class="subsection-title">ğŸ›¡ï¸ å®¹é”™æœºåˆ¶</h3>
            <div class="diagram-container">
                <div class="mermaid">
graph TD
    A[è§†é¢‘å¤„ç†è¯·æ±‚] --> B[FFmpegé›¶é‡ç¼–ç ]
    B -->|æˆåŠŸ| C[å®Œæˆå¤„ç†]
    B -->|å¤±è´¥| D[MoviePyé‡æ–°ç¼–ç ]
    D -->|æˆåŠŸ| C
    D -->|å¤±è´¥| E[è¿”å›é”™è¯¯ä¿¡æ¯]
                </div>
            </div>
            
            <h3 class="subsection-title">ğŸ“¦ é¡¹ç›®ç»“æ„</h3>
            <div class="code-block">
video_cutter_project/
â”œâ”€â”€ app.py              # ä¸»åº”ç”¨æ–‡ä»¶
â”œâ”€â”€ requirements.txt    # ä¾èµ–åŒ…åˆ—è¡¨
â”œâ”€â”€ static/
â”‚   â”œâ”€â”€ css/
â”‚   â”‚   â””â”€â”€ style.css   # æ ·å¼æ–‡ä»¶
â”‚   â””â”€â”€ js/
â”‚       â””â”€â”€ script.js   # JavaScripté€»è¾‘
â”œâ”€â”€ templates/
â”‚   â”œâ”€â”€ index.html      # ä¸»é¡µé¢
â”‚   â””â”€â”€ about.html      # å…³äºé¡µé¢
â””â”€â”€ README.md           # é¡¹ç›®è¯´æ˜
            </div>
            
            <h3 class="subsection-title">ğŸš€ éƒ¨ç½²æŒ‡å—</h3>
            <ol>
                <li>å®‰è£…ä¾èµ–: <code>pip install -r requirements.txt</code></li>
                <li>ç¡®ä¿FFmpegå·²å®‰è£…å¹¶é…ç½®åˆ°ç¯å¢ƒå˜é‡</li>
                <li>è¿è¡Œåº”ç”¨: <code>python app.py</code></li>
                <li>è®¿é—® <code>http://localhost:5001</code></li>
            </ol>
        </div>
    </div>
</body>
</html>